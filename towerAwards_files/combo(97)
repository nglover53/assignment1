YUI.add("hermes-template-fluid-subnav",(function(n,l){var e=n.Template.Handlebars.revive({1:function(n,l,e,t,a){return" with-overflow-menu hidden"},3:function(n,l,e,t,a){var o,r=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return null!=(o=r(e,"unless").call(null!=l?l:n.nullContext||{},null!=l?r(l,"disabled"):l,{name:"unless",hash:{},fn:n.program(4,a,0),inverse:n.noop,data:a,loc:{start:{line:8,column:5},end:{line:16,column:16}}}))?o:""},4:function(n,l,e,t,a){var o,r,s=null!=l?l:n.nullContext||{},i=n.hooks.helperMissing,u="function",c=n.escapeExpression,m=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return'\t\t\t\t\t<li id="'+c(typeof(r=null!=(r=m(e,"id")||(null!=l?m(l,"id"):l))?r:i)===u?r.call(s,{name:"id",hash:{},data:a,loc:{start:{line:9,column:13},end:{line:9,column:19}}}):r)+'" class="link '+(null!=(o=m(e,"if").call(s,null!=l?m(l,"selected"):l,{name:"if",hash:{},fn:n.program(5,a,0),inverse:n.noop,data:a,loc:{start:{line:9,column:33},end:{line:9,column:64}}}))?o:"")+'" role="menuitem">\n\t\t\t\t\t\t<a href="'+c(typeof(r=null!=(r=m(e,"href")||(null!=l?m(l,"href"):l))?r:i)===u?r.call(s,{name:"href",hash:{},data:a,loc:{start:{line:10,column:15},end:{line:10,column:23}}}):r)+'">\n\t\t\t\t\t\t\t<span>'+c(typeof(r=null!=(r=m(e,"name")||(null!=l?m(l,"name"):l))?r:i)===u?r.call(s,{name:"name",hash:{},data:a,loc:{start:{line:11,column:13},end:{line:11,column:21}}}):r)+"</span>\n\t\t\t\t\t\t\t"+(null!=(o=m(e,"if").call(s,null!=l?m(l,"label"):l,{name:"if",hash:{},fn:n.program(7,a,0),inverse:n.noop,data:a,loc:{start:{line:12,column:7},end:{line:12,column:68}}}))?o:"")+"\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\n\t\t\t\t\t</li>\n"},5:function(n,l,e,t,a){return"selected"},7:function(n,l,e,t,a){var o,r=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return'<span class="label-beta">'+n.escapeExpression("function"==typeof(o=null!=(o=r(e,"label")||(null!=l?r(l,"label"):l))?o:n.hooks.helperMissing)?o.call(null!=l?l:n.nullContext||{},{name:"label",hash:{},data:a,loc:{start:{line:12,column:45},end:{line:12,column:54}}}):o)+"</span>"},9:function(n,l,e,t,a){var o=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return'\t\t\t\t<li class="link more-link">\n\t\t\t\t\t'+n.escapeExpression((o(e,"intlMessage")||l&&o(l,"intlMessage")||n.hooks.helperMissing).call(null!=l?l:n.nullContext||{},{name:"intlMessage",hash:{intlName:"filter-bar.MORE"},data:a,loc:{start:{line:21,column:5},end:{line:21,column:48}}}))+"\n\t\t\t\t\t<span></span>\n\t\t\t\t</li>\n"},11:function(n,l,e,t,a){return'\t\t\t\t\t<li class="overflow-menu-button">\n\t\t\t\t\t\t<svg class="icon icon-more_horizontal"><use xlink:href="#icon-more_horizontal"></use></svg>\n\t\t\t\t\t</li>\n'},13:function(n,l,e,t,a){var o=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return'\t\t\t<div class="more-link">\n\t\t\t\t'+n.escapeExpression((o(e,"intlMessage")||l&&o(l,"intlMessage")||n.hooks.helperMissing).call(null!=l?l:n.nullContext||{},{name:"intlMessage",hash:{intlName:"filter-bar.MORE"},data:a,loc:{start:{line:35,column:4},end:{line:35,column:46}}}))+'\n\t\t\t\t<a class="dropdown-arrow" role="menuitem" tabindex="0" aria-haspopup="true" aria-expanded="false"><span></span></a>\n\t\t\t</div>\n'},15:function(n,l,e,t,a){return" with-mobile-overflow-menu"},compiler:[8,">= 4.3.0"],main:function(n,l,e,t,a){var o,r=null!=l?l:n.nullContext||{},s=n.hooks.helperMissing,i=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return'<div class="fluid-subnav-shim">\n<div class="fluid-subnav'+(null!=(o=(i(e,"ifCond")||l&&i(l,"ifCond")||s).call(r,null!=l?i(l,"showAutoOverflowMenu"):l,"||",null!=l?i(l,"showAutoOverflowMenuOnMobile"):l,{name:"ifCond",hash:{},fn:n.program(1,a,0),inverse:n.noop,data:a,loc:{start:{line:2,column:24},end:{line:2,column:127}}}))?o:"")+'" role="navigation" aria-label="'+n.escapeExpression((i(e,"intlMessage")||l&&i(l,"intlMessage")||s).call(r,{name:"intlMessage",hash:{intlName:"common.SECONDARY"},data:a,loc:{start:{line:2,column:159},end:{line:2,column:202}}}))+'">\n\t<div class="subnav-content fluid-centered">\n\n\t\t<div class="subnav-items-container">\n\t\t\t<ul class="links" role="menubar">\n'+(null!=(o=i(e,"each").call(r,null!=l?i(l,"links"):l,{name:"each",hash:{},fn:n.program(3,a,0),inverse:n.noop,data:a,loc:{start:{line:7,column:4},end:{line:17,column:13}}}))?o:"")+"\n"+(null!=(o=i(e,"unless").call(r,null!=l?i(l,"hideMoreLinks"):l,{name:"unless",hash:{},fn:n.program(9,a,0),inverse:n.noop,data:a,loc:{start:{line:19,column:4},end:{line:24,column:15}}}))?o:"")+"\n"+(null!=(o=i(e,"if").call(r,null!=l?i(l,"showAutoOverflowMenu"):l,{name:"if",hash:{},fn:n.program(11,a,0),inverse:n.noop,data:a,loc:{start:{line:26,column:4},end:{line:30,column:11}}}))?o:"")+"\t\t\t</ul>\n\n"+(null!=(o=i(e,"unless").call(r,null!=l?i(l,"hideMoreLinks"):l,{name:"unless",hash:{},fn:n.program(13,a,0),inverse:n.noop,data:a,loc:{start:{line:33,column:3},end:{line:38,column:14}}}))?o:"")+'\t\t</div>\n\n\t\t<div class="fader'+(null!=(o=i(e,"if").call(r,null!=l?i(l,"showAutoOverflowMenuOnMobile"):l,{name:"if",hash:{},fn:n.program(15,a,0),inverse:n.noop,data:a,loc:{start:{line:41,column:19},end:{line:41,column:88}}}))?o:"")+'"><span></span></div>\n\t</div>\n</div>\n</div>\n'},useData:!0}),t={};n.Array.each([],(function(l){var e=n.Template.get("hermes/"+l);e&&(t[l]=e)})),n.Template.register("hermes/fluid-subnav",(function(l,a){return(a=a||{}).partials=a.partials?n.merge(t,a.partials):t,e(l,a)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("fluid-subnav-view",(function(e,t){"use strict";var i;i={css:{subnav:".fluid-subnav",subnavContent:".subnav-content",links:".subnav-content .links",tools:".subnav-content .tools",link:".link",altMoreLinks:"li.more-link",moreLinks:"div.more-link"},options:{}},e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){return this.viewerNSID=this.appContext.getViewer().nsid,this.nsid=e.nsid?e.nsid:this.viewerNSID,this.isViewingSelf=e.isViewingSelf||!1,this.state={isFixed:!1},e.subnavConfig&&(e.subnavConfig.selected&&this.set("selected",e.subnavConfig.selected),e.subnavConfig.links&&this.set("links",e.subnavConfig.links),e.subnavConfig.moreLinks&&this.set("moreLinks",e.subnavConfig.moreLinks)),this},loadState:function(t){var i=this;return t=t||[],this.viewerNSID&&t.push(this.appContext.getModel("person-models",this.viewerNSID).then((function(e){i.set("viewerModel",e)}))),this.skipLoadingPersonModel||t.push(this.appContext.getModel("person-models",this.nsid).then((function(e){i.get("links")||i.populateUrls(e)}))),e.Promise.all(t)},buildContainer:function(){var e={links:this.get("links"),hideMoreLinks:void 0===this.get("moreLinks"),showAutoOverflowMenu:this.get("showAutoOverflowMenu")};return this.setContainerWithTemplate("fluid-subnav",e),this},activate:function(){return this.dialog,this.container=this.get("container"),this.subnavElement=this.get("container").one(i.css.subnav),this.listNode=this.container.one(i.css.links),this.set("floatThreshold",this.get("container").get("offsetTop")-50),this.get("floatOnScroll")&&(this.registerEventHandler(e.globalEvents.subscribe("window:scroll:nothrottle",this.toggleFixedSubnav.bind(this))),this.updateFloatThreshold(),this.registerEventHandler(e.on("globalNav:bannerSubviewActivated",this.updateFloatThreshold.bind(this))),this.registerEventHandler(e.on("globalNav:bannerDismissed",this.updateFloatThreshold.bind(this)))),void 0!==this.get("moreLinks")&&(this.registerEventHandler(this.container.one(i.css.moreLinks).on("click",this.toggleMoreLinks.bind(this))),this.registerEventHandler(this.container.one(i.css.altMoreLinks).on("click",this.toggleMoreLinks.bind(this))),this.registerEventHandler(this.container.one("a.dropdown-arrow").on("focus",this.showFocus.bind(this))),this.registerEventHandler(this.container.one("a.dropdown-arrow").on("blur",this.hideFocus.bind(this))),this.registerEventHandler(this.container.one("a.dropdown-arrow").on("keydown",this.toggleOrEnterSubmenu.bind(this)))),this.registerEventHandler(this.container.one("div.fluid-subnav").on("keydown",this.arrowTabNavigation.bind(this))),e.AnchorRepositioner.addOffset(t,this.container),this.scrollToSelected(),this.get("showAutoOverflowMenu")&&(this.overflowButtonNode=this.listNode.one(".overflow-menu-button"),this.overflowLinks=[],this.updateBreakpoints(),this.registerEventHandler(e.on("resize",e.betterThrottle(this.updateBreakpoints.bind(this),500,this,!0))),this.registerEventHandler(this.overflowButtonNode.on("click",this.handleOverflowButtonClick.bind(this)))),this.subnavElement.removeClass("hidden"),this},updateFloatThreshold:function(){this.set("floatThreshold",this.get("container").get("offsetTop")-50),this.toggleFixedSubnav()},arrowTabNavigation:function(e){var t=e.keyCode,i=e.target.ancestor("li"),s=i&&i.next("li");38===t?(e.preventDefault(),this.focusOnPreviousItem.call(this,e)):(40===t||9===t&&!e.shiftKey)&&s&&(e.preventDefault(),this.focusOnNextItem.call(this,e))},focusOnPreviousItem:function(e){var t=e.target.ancestor("li");if(t){var i=t.previous("li");i&&(this.container.all(".has-keyboard-focus").removeClass("has-keyboard-focus"),"none"!==i.getStyle("display")?i.one("a").focus():i.previous("li").one("a").focus())}else{var s=e.target.ancestor("div.subnav-content").one("ul > li:last-child").previous("li");"none"===s.getStyle("display")&&(s=s.previous("li")),s&&(this.closeSubmenu.call(this,e),this.container.all(".has-keyboard-focus").removeClass("has-keyboard-focus"),s.one("a").focus())}},focusOnNextItem:function(e){var t=e.target.ancestor("li"),i=t.next("li");this.container.all(".has-keyboard-focus").removeClass("has-keyboard-focus"),this.get("moreLinks")?t&&(i.hasClass("more-link")||"none"===i.getStyle("display")?(i=e.target.ancestor("ul").next("div"))&&(this.container.all(".has-keyboard-focus").removeClass("has-keyboard-focus"),i.one("a").focus()):(this.container.all(".has-keyboard-focus").removeClass("has-keyboard-focus"),i.one("a").focus())):(i=e.target.ancestor("li").next("li"))&&i.one("a")&&("none"!==i.getStyle("display")?i.one("a").focus():i.next("li").one("a").focus())},showFocus:function(e){e.target.ancestor().addClass("has-keyboard-focus")},hideFocus:function(e){e.target.ancestor().removeClass("has-keyboard-focus")},openSubmenu:function(e){this.toggleMoreLinks(e)},closeSubmenu:function(e){this.dialog&&this.dialog.close()},toggleOrEnterSubmenu:function(e){var t=e.keyCode;if(13===t||32===t)return e.preventDefault(),void("false"===e.target.getAttribute("aria-expanded")?this.openSubmenu.call(this,e):(this.closeSubmenu.call(this,e),this.container.one("div.more-link").addClass("has-keyboard-focus")));if(9===t&&!e.shiftKey&&"true"===e.target.getAttribute("aria-expanded")||40===t){e.preventDefault();var i=this.container.ancestor("body").one("div.droparound");if(i){var s=i.one("ul[role=menu]").one("li:first-child");s.addClass("has-keyboard-focus"),s.one("a").focus()}}else 9===t&&e.shiftKey&&this.closeSubmenu.call(this,e)},scrollToSelected:function(){var t=this.get("container").one(i.css.links),s=this.get("container").one(i.css.link+".selected"),o=Date.now(),n=this;t&&(t=t.getDOMNode()),s&&(s=s.getDOMNode().offsetLeft||0),this.animate=e.AnimationManager.subscribe((function(){var e=(Date.now()-o)/400;e>1&&(e=1),t.scrollLeft=e*s,e>=1&&n.animate.detach()}))},populateUrls:function(e){this.set("links",[]),this.set("moreLinks",[]),this.set("showAutoOverflowMenu",!1),this.set("showAutoOverflowMenuOnMobile",!1)},getShareView:function(){},toggleMoreLinks:function(t){t.halt(),this.dialog=new e.Views.FluidDroparound({appContext:this.appContext,showDropArrow:!0,preferBottom:!0,observePageResize:!0,anchorElement:t.target.one("span"),minVerticalSpace:250,positionFixed:!0,menuItems:this.get("moreLinks")}),this.dialog.show()},toggleFixedSubnav:function(){var t=e.config.win.scrollY||e.config.win.pageYOffset;t>this.get("floatThreshold")&&!this.state.isFixed?(this.subnavElement.addClass("fixed"),this.state.isFixed=!0):t<this.get("floatThreshold")&&this.state.isFixed&&(this.subnavElement.removeClass("fixed"),this.state.isFixed=!1),this.dialog&&this.dialog.isActiveAndInDOM()&&this.dialog.anchorPositionChange()},updateBreakpoints:function(){var e,t,i=this,s=0,o=50;if(this.overflowLinks=[],this.listNode){if(t=this.listNode.getDOMNode().getBoundingClientRect().width,e=this.listNode.all(".link"),this.overflowDroparound&&this.overflowDroparound.close(),!this.get("showAutoOverflowMenuOnMobile")&&this.appContext.viewportData.getWidth()<700)return e.each((function(e){e.removeClass("hidden")})),void this.overflowButtonNode.removeClass("displayed");e.each((function(e){e.removeClass("hidden"),e.addClass("breakpoint-displayed")})),this.overflowButtonNode.removeClass("displayed"),e.each((function(n,a){s+=n.getDOMNode().getBoundingClientRect().width+10,a!==e.size()-1||i.overflowLinks.length||(o=0),s>=t-o&&(n.addClass("hidden"),i.overflowLinks.push(i.get("links").find((function(e){return e.id===n.getAttribute("id")})))),n.removeClass("breakpoint-displayed")})),this.overflowLinks.length&&this.overflowButtonNode.addClass("displayed")}},handleOverflowButtonClick:function(){var t=this.overflowLinks.map((function(e){return{text:e.name,href:e.href,isSelected:e.selected}}));this.overflowDroparound=new e.Views.FluidDroparound({appContext:this.appContext,showDropArrow:!0,preferBottom:!0,observePageResize:!0,anchorElement:this.overflowButtonNode,minVerticalSpace:250,positionFixed:!0,anchorOffsetVertical:11,menuItems:t,classList:"fluid-subnav-overflow-droparound"}),this.overflowDroparound.show()},destructor:function(){e.AnchorRepositioner.removeOffset(t)}},{ATTRS:{floatOnScroll:{value:!0},floatThreshold:{value:250}}})}),"@VERSION@",{requires:["flickr-view","hermes-template-fluid-subnav","fluid-droparound-view","url-helper","animation-manager"],optionalRequires:["fluid"],langBundles:["filter-bar","header","common","cameraroll","profile"]});YUI.add("hermes-lang-filter-bar",(function(e,t){e.Intl.add("hermes/filter-bar","en-US",{EVERYONE:[{type:0,value:"Everyone’s Photos"}],YOUR_PHOTOS:[{type:0,value:"Your Photos"}],CONTACTS_PHOTOS:[{type:0,value:"Your Contacts’ Photos"}],USER_PHOTOS:[{type:1,value:"name"},{type:0,value:"’s Photos"}],GROUP_PHOTOS:[{type:0,value:"Photos in "},{type:1,value:"name"}],PEOPLE:[{type:0,value:"People"}],GROUPS:[{type:0,value:"Groups"}],USER_PHOTOS_IN_GROUP:[{type:1,value:"name"},{type:0,value:"’s Photos in "},{type:1,value:"group"}],YOUR_PHOTOS_IN_GROUP:[{type:0,value:"Your Photos in "},{type:1,value:"group"}],CONTACTS_PHOTOS_IN_GROUP:[{type:0,value:"Your Contacts’ Photos in "},{type:1,value:"group"}],YOUR_FAVORITES:[{type:0,value:"Your Favorites"}],MORE:[{type:0,value:"More"}],LESS:[{type:0,value:"Less"}],PHOTOS_VIDEOS:[{type:0,value:"Photos & Videos"}],ONLY_PHOTOS:[{type:0,value:"Only Photos"}],ONLY_VIDEOS:[{type:0,value:"Only Videos"}],ALL_TIME:[{type:0,value:"All Time"}],DATE_TAKEN:[{type:0,value:"Date Taken"}],DATE_POSTED:[{type:0,value:"Date Posted"}],DATE_UPLOADED:[{type:0,value:"Date Uploaded"}],FROM:[{type:0,value:"From"}],TO:[{type:0,value:"To"}],MONTH_CHARS:[{type:0,value:"mm"}],DAY_CHARS:[{type:0,value:"dd"}],YEAR_CHARS:[{type:0,value:"yyyy"}],DATE_INVALID:[{type:0,value:"Date invalid"}],DONE:[{type:0,value:"Done"}],DATE:[{type:0,value:"Date"}],LICENSE:[{type:0,value:"License"}],ANY_LICENSE:[{type:0,value:"Any License"}],CC_LICENSE:[{type:0,value:"Creative Commons only"}],CC_LICENSE_PARENT:[{type:0,value:"Creative Commons"}],COMM_LICENSE:[{type:0,value:"Commercial use allowed"}],DERIV_LICENSE:[{type:0,value:"Modifications allowed"}],SS_ON:[{type:0,value:"SafeSearch on"}],ON:[{type:0,value:"On"}],SS_MOD:[{type:0,value:"SafeSearch moderate"}],MOD:[{type:0,value:"Moderate"}],SS_OFF:[{type:0,value:"SafeSearch off"}],OFF:[{type:0,value:"Off"}],RELEVANT:[{type:0,value:"Relevant"}],RECENT:[{type:0,value:"Recent"}],INTERESTING:[{type:0,value:"Interesting"}],SORT_BY:[{type:0,value:"Sort"}],SEARCH_IN:[{type:0,value:"Search"}],ADVANCED_SEARCH:[{type:0,value:"Advanced Search"}],PUBLIC:[{type:0,value:"Public view"}],FRIEND:[{type:0,value:"Friend view"}],FAMILY:[{type:0,value:"Family view"}],FRIEND_AND_FAMILY:[{type:0,value:"Friend & family view"}],VIEW_ALL:[{type:0,value:"View all"}],FILTER_MODAL_TITLE:[{type:0,value:"New ways to view your Photostream!"}],FILTER_MODAL_CONTENT_FILTER:[{type:0,value:"Easily see all your photos in Photostream with <b>View all</b>, or see your Photostream the way others see it with <b>Public</b>, <b>Friend</b> and <b>Family</b> views."}],FILTER_MODAL_CONTENT_SORT:[{type:0,value:"Sort by <b>Date uploaded</b> or <b>Date taken</b>."}],FILTER_MODAL_PIN:[{type:0,value:"Don’t worry, we’ll remember the views you select."}],FILTER_MODAL_GROUCHY:[{type:0,value:'Don’t like it? <a target="_blank" href="https://www.flickr.com/help/forum/en-us/72157652044178359/#reply72157652064734118">Complain about it.</a>'}],FILTER_MODAL_FEEDBACK:[{type:0,value:'Don’t like it? <a target="_blank" href="https://www.flickr.com/help/forum/en-us/72157652044178359/#reply72157652064734118">Let us know.</a>'}]})}),"@VERSION@",{requires:["intl"]});YUI.add("fluid-magic-subnav-view",(function(e,t){"use strict";var s=require("hermes-core/flog")(t);e.FlickrView.create(this.name,e.namespace("Views")["fluid-subnav-view"],[],{langBundles:this.details.langBundles,loadState:function(){var e=[],t=this;return e.push(this.appContext.getModel("person-relationship-models",this.nsid).then((function(e){t.set("relationship",e)}),(function(e){s.warn({err:e})}))),this.constructor.superclass.loadState.call(this,e)},activate:function(){return this.constructor.superclass.activate.call(this)},populateUrls:function(t){var s,i,a=this,l=!1;s=e.URLHelper.generatePersonUrls(t),this.nsid!==this.appContext.getViewer().nsid&&(l=!0),this.get("relationship")&&this.get("relationship").getValue("isIgnored"),this.set("links",[{name:this.intlMessage({intlName:"common.ABOUT"}),id:"about",href:s.profile},{name:this.intlMessage({intlName:"header.PHOTOSTREAM"}),id:"photostream",href:s.photostream},{name:this.intlMessage({intlName:"header.ALBUMS"}),id:"albums",href:s.albums},{name:this.intlMessage({intlName:"common.FAVES_SHORT"}),id:"favorites",href:s.favorites},{name:this.intlMessage({intlName:"common.GALLERIES"}),id:"galleries",href:s.galleries},{name:this.intlMessage({intlName:"filter-bar.GROUPS"}),id:"groups",href:l?s.theirGroups:s.myGroups,disabled:l&&!this.appContext.flipper.isFlipped("enable-people-groups")},{name:this.intlMessage({intlName:"common.STATS"}),id:"stats",href:s.stats,disabled:l},{name:this.intlMessage({intlName:"cameraroll.CAMERA_ROLL"}),id:"cameraroll",href:s.cameraroll,disabled:l}]),this.get("selected")&&(i=this.get("links").filter((function(e){return e.id===a.get("selected")})))&&i[0]&&(i[0].selected=!0),this.set("showAutoOverflowMenu",!0),this.set("showAutoOverflowMenuOnMobile",!1)}})}),"@VERSION@",{requires:["flickr-view","fluid-subnav-view","url-helper"],optionalRequires:["hermes-core"],langBundles:["filter-bar","header","common","cameraroll"]});